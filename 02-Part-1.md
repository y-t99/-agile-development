### 设计臭味

当软件出现下面任何一种气味时，就表明软件正在腐化：

1. 僵化性（rigidity）——设计难以改变。

2. 脆弱性（fragility）——设计易于遭到破坏。

3. 顽固性（immobility）——设计难以重用。

4. 粘滞性（viscosity）——难以做正确的事情。

> 粘滞性有两种表现形式：软件的粘滞性和环境的粘滞性。
>
> 1. 当面临一个改动时，开发人员常常发现会有多种改动的方法。其中，一些方法会保持设计；而另外一些会破坏设计（也就是拼凑的方法）。当可以保持系统设计的方法比拼凑手法更难应用时，就表明设计具有高的粘滞性。做错误的事情是容易的，但是做正确的事情却很难。我们希望在软件设计中，可以容易地进行那些保持设计的改动。
> 2. 当开发环境迟钝、低效时，就会产生环境的粘滞性。例如，如果编译所花费的时间很长，那么开发人员就会被引诱去做不会导致大规模重编译的改动，即使那些改动不再保持设计。如果源代码控制系统需要几个小时去签入仅仅几个文件，那么开发人员就会被引诱去做那些需要尽可能少签入的改动，而不管改动是否会保持设计。

5. 不必要的复杂性（needless complexity）——过分设计。

6. 不必要的重复（needless repetition）——滥用鼠标进行复制、粘贴。

7. 晦涩性（opacity）——混乱的表达。

在非敏捷环境中，由于需求没有按照初始设计预期的方式进行变化，从而导致了设计的退化。**通常，改动都很急迫，并且进行改动的开发人员对于原始的设计思路并不熟悉。因而，虽然可以对设计进行改动，但是却在某种程序上违反了原始的设计。随着改动的不断进行，这些违反渐渐地积累，直到恶性肿瘤出现。**

然而，我们不能因为设计退化而去责怪需求的变化。作为软件开发人员，我们非常了解需求会变化。事实上，我们中的大多数人都认识到需求是项目中最不稳定的要素。如果我们的设计由于持续、大量的需求变化而失败，那就表明我们的设计和实践本身是有缺陷的。我们必须要设法找到一种方法，使得设计对于这种变化具有弹性，并且应用一些实践来防止设计腐化。

开发人员不是每几周才“清洁”他们的设计。而是每天、每小时甚至每分钟都要保持软件尽可能的干净、简单并富有表达力。他们从来不说，“稍后我们会回来修正它。”他们决不让腐化出现。

